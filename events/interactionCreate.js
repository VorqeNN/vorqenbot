const {Discord,MessageActionRow,MessageButton,MessageEmbed,MessageSelectMenu,Message,MessageAttachment,Modal,TextInputComponent}=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml','utf8')),utils=require('../utils.js'),fetch=require('node-fetch');let Cooldown=new Map();module['exports']=async(_0x8b5eb2,_0x2af4aa)=>{if(_0x2af4aa['type']==='APPLICATION_COMMAND')return;let _0x260639;if(config['TicketSettings']['SelectMenu']===![])_0x260639=_0x2af4aa['customId'];if(!_0x2af4aa['values'])_0x260639=_0x2af4aa['customId'];if(config['TicketSettings']['SelectMenu']&&_0x2af4aa['values'])_0x260639=_0x2af4aa['values'][0x0];if(_0x260639==='button1'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x32a494=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,''+utils['duration'](config['TicketSettings']['TicketCooldown']*0x3e8-(Date['now']()-Cooldown['get'](_0x2af4aa['user']['id'])))),_0x697fd4=new MessageEmbed()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('RED')['setDescription'](_0x32a494)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x2af4aa['user']['id']))return _0x2af4aa['editReply']({'embeds':[_0x697fd4],'ephemeral':!![]});let _0xf843ea='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20TicketButton1,\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0xf843ea,_0x4932e2=>{if(_0x4932e2)console['log'](_0x4932e2);});let _0x1f5f36=new MessageEmbed()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['blacklistedUsers']['has'](''+_0x2af4aa['user']['id'])&&_0x8b5eb2['blacklistedUsers']['get'](''+_0x2af4aa['user']['id'],'blacklisted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x1f5f36],'ephemeral':!![]});let _0x454026=![],_0x4f90e6=new MessageEmbed()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x5aa292=0x0;_0x5aa292<config['TicketSettings']['BlacklistedRoles']['length'];_0x5aa292++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x5aa292]))_0x454026=!![];}if(_0x454026===!![])return _0x2af4aa['editReply']({'embeds':[_0x4f90e6],'ephemeral':!![]});if(!_0x2af4aa['guild']['channels']['cache']['get'](config['TicketButton1']['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton1.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0x5efc43=config['TicketSettings']['MaxTickets'],_0x1f91c3=0x0,_0x31451e=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0x5efc43),_0x9a58c4=new MessageEmbed()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('RED')['setDescription'](_0x31451e)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x2af4aa['guild']['channels']['cache']['forEach'](_0x3100bc=>{if(_0x8b5eb2['tickets']['has'](_0x3100bc['id'])){let _0x1f6fe6=_0x8b5eb2['tickets']['get'](''+_0x3100bc['id'],'userID');_0x1f6fe6&&_0x1f6fe6===_0x2af4aa['user']['id']&&_0x8b5eb2['tickets']['get'](_0x3100bc['id'],'status')!=='Closed'&&(_0x1f91c3=_0x1f91c3+0x1);}});if(_0x1f91c3>=_0x5efc43)return _0x2af4aa['editReply']({'embeds':[_0x9a58c4],'ephemeral':!![]})['then'](_0x21818e=>{_0x1f91c3=0x0;})['catch'](_0x53979c=>{});let _0x1d484c=config['TicketButton1']['ChannelName']['replace'](/{username}/g,''+_0x2af4aa['user']['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{user-id}/g,''+_0x2af4aa['user']['id']),_0x269d85=[{'id':_0x2af4aa['member']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']},{'id':_0x2af4aa['guild']['id'],'deny':['SEND_MESSAGES','VIEW_CHANNEL']},{'id':_0x8b5eb2['user']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL']}];await config['TicketButton1']['SupportRoles']['forEach'](_0x139d41=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x139d41);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton1.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0x50f639={'id':role['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']};_0x269d85['push'](_0x50f639);});const _0x4b948f=await _0x2af4aa['guild']['channels']['create'](_0x1d484c,{'type':'text','parent':config['TicketButton1']['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{category}/g,''+config['TicketButton1']['TicketName']),'permissionOverwrites':_0x269d85}),_0x31a9f4=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x5ca57c=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x5ce1c2='';if(config['ClaimingSystem']['Enabled'])_0x5ce1c2=new MessageActionRow()['addComponents'](_0x31a9f4,_0x5ca57c);if(config['ClaimingSystem']['Enabled']===![])_0x5ce1c2=new MessageActionRow()['addComponents'](_0x31a9f4);let _0x39ce31=config['TicketButton1']['TicketMessage']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>'),_0x2a44dd=config['TicketButton1']['TicketMessageTitle']['replace'](/{category}/g,''+config['TicketButton1']['TicketName']);var _0x2b9228=_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x17a999=new MessageEmbed();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x17a999['setAuthor']({'name':''+_0x2a44dd,'iconURL':''+_0x2b9228});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x17a999['setAuthor']({'name':''+_0x2a44dd});if(!config['TicketOpenEmbed']['EmbedColor'])_0x17a999['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x17a999['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x17a999['setThumbnail'](_0x2b9228);_0x17a999['setDescription'](''+_0x39ce31);if(config['TicketOpenEmbed']['FooterMsg'])_0x17a999['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x17a999['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x17a999['setTimestamp']();_0x4b948f['send']({'embeds':[_0x17a999],'components':[_0x5ce1c2],'fetchReply':!![]})['then'](async _0x50923f=>{let _0x36af86=new MessageEmbed()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('GREEN')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x4b948f['id']+'>')['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x2d0ce2=new MessageActionRow()['addComponents'](new MessageButton()['setStyle']('LINK')['setURL'](''+_0x50923f['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));_0x2af4aa['editReply']({'embeds':[_0x36af86],'components':[_0x2d0ce2],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x4b948f['send']({'content':'<@!'+_0x2af4aa['user']['id']+'>'})['then'](_0x1084c9=>setTimeout(()=>_0x1084c9['delete']()['catch'](_0x3cc513=>{}),0x1f4));if(config['TicketButton1']['MentionSupportRoles']){let _0x633108=config['TicketButton1']['SupportRoles']['map'](_0x6312d7=>{let _0x156075=_0x2af4aa['guild']['roles']['cache']['get'](_0x6312d7);if(_0x156075)return _0x156075;});_0x4b948f['send'](_0x633108['join']('\x20'))['then'](_0xd0e625=>setTimeout(()=>_0xd0e625['delete']()['catch'](_0x49da74=>{}),0x1f4));}_0x8b5eb2['tickets']['ensure'](''+_0x4b948f['id'],{'userID':_0x2af4aa['user']['id'],'ticketType':config['TicketButton1']['TicketName'],'button':'TicketButton1','msgID':_0x50923f['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open'});let _0x481025=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x2af4aa['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x2af4aa['user']['id']),_0x481025);_0x8b5eb2['emit']('ticketCreate',_0x2af4aa);}),async()=>{let _0x3ed099='aHR0cHM6Ly9saWMu',_0x56a007='c3dxcHBpbmcuY29tLw==',_0x463020=''+_0x3ed099+_0x56a007;!config['LicenseKey']&&(console['log']('\x1b[31m%s\x1b[0m','[ERROR]\x20You\x20did\x20not\x20provide\x20a\x20valid\x20License\x20Key\x20in\x20the\x20config!\x20To\x20get\x20a\x20license\x20key,\x20Join\x20our\x20discord\x20server\x20and\x20create\x20a\x20ticket\x20discord.gg/eRaeJdTsPY'),process['exit']());if(config['LicenseKey'])try{lic=await fetch(''+Buffer['from'](_0x463020['toString']('utf8'),'base64')['toString']()+config['LicenseKey']);}catch(_0x4702f3){console['log']('\x1b[31m%s\x1b[0m','[ERROR]\x20You\x20did\x20not\x20provide\x20a\x20valid\x20License\x20Key\x20in\x20the\x20config!\x20To\x20get\x20a\x20license\x20key,\x20Join\x20our\x20discord\x20server\x20and\x20create\x20a\x20ticket\x20discord.gg/eRaeJdTsPY'),process['exit']();}try{lic2=await lic['json']();}catch(_0x12bd22){console['log']('\x1b[31m%s\x1b[0m','[ERROR]\x20You\x20did\x20not\x20provide\x20a\x20valid\x20License\x20Key\x20in\x20the\x20config!\x20To\x20get\x20a\x20license\x20key,\x20Join\x20our\x20discord\x20server\x20and\x20create\x20a\x20ticket\x20discord.gg/eRaeJdTsPY'),process['exit']();}};}if(_0x260639==='button2'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x45dcdb=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,''+utils['duration'](config['TicketSettings']['TicketCooldown']*0x3e8-(Date['now']()-Cooldown['get'](_0x2af4aa['user']['id'])))),_0x48ba82=new MessageEmbed()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('RED')['setDescription'](_0x45dcdb)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x2af4aa['user']['id']))return _0x2af4aa['editReply']({'embeds':[_0x48ba82],'ephemeral':!![]});let _0x1cdcc0='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20TicketButton2,\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x1cdcc0,_0x249bf4=>{if(_0x249bf4)console['log'](_0x249bf4);});let _0x4fa8e3=new MessageEmbed()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['blacklistedUsers']['has'](''+_0x2af4aa['user']['id'])&&_0x8b5eb2['blacklistedUsers']['get'](''+_0x2af4aa['user']['id'],'blacklisted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x4fa8e3],'ephemeral':!![]});let _0x104705=![],_0x17d1bf=new MessageEmbed()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x37b128=0x0;_0x37b128<config['TicketSettings']['BlacklistedRoles']['length'];_0x37b128++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x37b128]))_0x104705=!![];}if(_0x104705===!![])return _0x2af4aa['editReply']({'embeds':[_0x17d1bf],'ephemeral':!![]});if(config['TicketButton2']['Enabled']&&!_0x2af4aa['guild']['channels']['cache']['get'](config['TicketButton2']['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton2.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0x39e723=config['TicketSettings']['MaxTickets'],_0x51942=0x0,_0x45c5f5=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0x39e723),_0x1e2e44=new MessageEmbed()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('RED')['setDescription'](_0x45c5f5)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x2af4aa['guild']['channels']['cache']['forEach'](_0x4156bd=>{if(_0x8b5eb2['tickets']['has'](_0x4156bd['id'])){let _0x5e7fd9=_0x8b5eb2['tickets']['get'](''+_0x4156bd['id'],'userID');_0x5e7fd9&&_0x5e7fd9===_0x2af4aa['user']['id']&&_0x8b5eb2['tickets']['get'](_0x4156bd['id'],'status')!=='Closed'&&(_0x51942=_0x51942+0x1);}});if(_0x51942>=_0x39e723)return _0x2af4aa['editReply']({'embeds':[_0x1e2e44],'ephemeral':!![]})['then'](_0x5ad81a=>{_0x51942=0x0;})['catch'](_0x26e13f=>{});let _0xcfa6b3=config['TicketButton2']['ChannelName']['replace'](/{username}/g,''+_0x2af4aa['user']['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{user-id}/g,''+_0x2af4aa['user']['id']),_0x3f7dec=[{'id':_0x2af4aa['member']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']},{'id':_0x2af4aa['guild']['id'],'deny':['SEND_MESSAGES','VIEW_CHANNEL']},{'id':_0x8b5eb2['user']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL']}];await config['TicketButton2']['SupportRoles']['forEach'](_0xa8c87b=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0xa8c87b);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton2.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0x4b43b5={'id':role['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']};_0x3f7dec['push'](_0x4b43b5);});const _0x2cb478=await _0x2af4aa['guild']['channels']['create'](_0xcfa6b3,{'type':'text','parent':config['TicketButton2']['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{category}/g,''+config['TicketButton2']['TicketName']),'permissionOverwrites':_0x3f7dec}),_0x1831a4=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x369de4=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x39140f='';if(config['ClaimingSystem']['Enabled'])_0x39140f=new MessageActionRow()['addComponents'](_0x1831a4,_0x369de4);if(config['ClaimingSystem']['Enabled']===![])_0x39140f=new MessageActionRow()['addComponents'](_0x1831a4);let _0x39513d=config['TicketButton2']['TicketMessage']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>'),_0x46bfbe=config['TicketButton2']['TicketMessageTitle']['replace'](/{category}/g,''+config['TicketButton2']['TicketName']);var _0x2b9228=_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x4bfcd8=new MessageEmbed();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x4bfcd8['setAuthor']({'name':''+_0x46bfbe,'iconURL':''+_0x2b9228});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x4bfcd8['setAuthor']({'name':''+_0x46bfbe});if(!config['TicketOpenEmbed']['EmbedColor'])_0x4bfcd8['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x4bfcd8['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x4bfcd8['setThumbnail'](_0x2b9228);_0x4bfcd8['setDescription'](''+_0x39513d);if(config['TicketOpenEmbed']['FooterMsg'])_0x4bfcd8['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x4bfcd8['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x4bfcd8['setTimestamp']();_0x2cb478['send']({'embeds':[_0x4bfcd8],'components':[_0x39140f],'fetchReply':!![]})['then'](async _0x51f854=>{let _0x4aba5c=new MessageEmbed()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('GREEN')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x2cb478['id']+'>')['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x41a527=new MessageActionRow()['addComponents'](new MessageButton()['setStyle']('LINK')['setURL'](''+_0x51f854['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));_0x2af4aa['editReply']({'embeds':[_0x4aba5c],'components':[_0x41a527],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x2cb478['send']({'content':'<@!'+_0x2af4aa['user']['id']+'>'})['then'](_0x308cda=>setTimeout(()=>_0x308cda['delete']()['catch'](_0x3c5a14=>{}),0x1f4));if(config['TicketButton2']['MentionSupportRoles']){let _0x44d1e5=config['TicketButton2']['SupportRoles']['map'](_0x36aad8=>{let _0x3ff098=_0x2af4aa['guild']['roles']['cache']['get'](_0x36aad8);if(_0x3ff098)return _0x3ff098;});_0x2cb478['send'](_0x44d1e5['join']('\x20'))['then'](_0x2e70a3=>setTimeout(()=>_0x2e70a3['delete']()['catch'](_0x588752=>{}),0x1f4));}_0x8b5eb2['tickets']['ensure'](''+_0x2cb478['id'],{'userID':_0x2af4aa['user']['id'],'ticketType':config['TicketButton2']['TicketName'],'button':'TicketButton2','msgID':_0x51f854['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open'});let _0x275e30=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x2af4aa['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x2af4aa['user']['id']),_0x275e30);_0x8b5eb2['emit']('ticketCreate',_0x2af4aa);});}if(_0x260639==='button3'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x5c44be=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,''+utils['duration'](config['TicketSettings']['TicketCooldown']*0x3e8-(Date['now']()-Cooldown['get'](_0x2af4aa['user']['id'])))),_0x25a4f9=new MessageEmbed()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('RED')['setDescription'](_0x5c44be)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x2af4aa['user']['id']))return _0x2af4aa['editReply']({'embeds':[_0x25a4f9],'ephemeral':!![]});let _0x1dcf79='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20TicketButton3,\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x1dcf79,_0x5730f5=>{if(_0x5730f5)console['log'](_0x5730f5);});let _0x345df2=new MessageEmbed()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['blacklistedUsers']['has'](''+_0x2af4aa['user']['id'])&&_0x8b5eb2['blacklistedUsers']['get'](''+_0x2af4aa['user']['id'],'blacklisted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x345df2],'ephemeral':!![]});let _0x567b97=![],_0x52718e=new MessageEmbed()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x2e52c4=0x0;_0x2e52c4<config['TicketSettings']['BlacklistedRoles']['length'];_0x2e52c4++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x2e52c4]))_0x567b97=!![];}if(_0x567b97===!![])return _0x2af4aa['editReply']({'embeds':[_0x52718e],'ephemeral':!![]});if(config['TicketButton3']['Enabled']&&!_0x2af4aa['guild']['channels']['cache']['get'](config['TicketButton3']['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton3.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0xd8a81b=config['TicketSettings']['MaxTickets'],_0x458694=0x0,_0x1eb6b3=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0xd8a81b),_0x3f3c57=new MessageEmbed()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('RED')['setDescription'](_0x1eb6b3)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x2af4aa['guild']['channels']['cache']['forEach'](_0x283fb1=>{if(_0x8b5eb2['tickets']['has'](_0x283fb1['id'])){let _0x1a5df1=_0x8b5eb2['tickets']['get'](''+_0x283fb1['id'],'userID');_0x1a5df1&&_0x1a5df1===_0x2af4aa['user']['id']&&_0x8b5eb2['tickets']['get'](_0x283fb1['id'],'status')!=='Closed'&&(_0x458694=_0x458694+0x1);}});if(_0x458694>=_0xd8a81b)return _0x2af4aa['editReply']({'embeds':[_0x3f3c57],'ephemeral':!![]})['then'](_0x29dc57=>{_0x458694=0x0;})['catch'](_0x509356=>{});let _0x150f5c=config['TicketButton3']['ChannelName']['replace'](/{username}/g,''+_0x2af4aa['user']['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{user-id}/g,''+_0x2af4aa['user']['id']),_0x54a99e=[{'id':_0x2af4aa['member']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']},{'id':_0x2af4aa['guild']['id'],'deny':['SEND_MESSAGES','VIEW_CHANNEL']},{'id':_0x8b5eb2['user']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL']}];await config['TicketButton3']['SupportRoles']['forEach'](_0x4d25b5=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x4d25b5);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton3.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0x2e1ead={'id':role['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']};_0x54a99e['push'](_0x2e1ead);});const _0x533afd=await _0x2af4aa['guild']['channels']['create'](_0x150f5c,{'type':'text','parent':config['TicketButton3']['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{category}/g,''+config['TicketButton3']['TicketName']),'permissionOverwrites':_0x54a99e}),_0x5bef1b=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x157a56=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x305f13='';if(config['ClaimingSystem']['Enabled'])_0x305f13=new MessageActionRow()['addComponents'](_0x5bef1b,_0x157a56);if(config['ClaimingSystem']['Enabled']===![])_0x305f13=new MessageActionRow()['addComponents'](_0x5bef1b);let _0x2a3fdb=config['TicketButton3']['TicketMessage']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>'),_0x408304=config['TicketButton3']['TicketMessageTitle']['replace'](/{category}/g,''+config['TicketButton3']['TicketName']);var _0x2b9228=_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x544b84=new MessageEmbed();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x544b84['setAuthor']({'name':''+_0x408304,'iconURL':''+_0x2b9228});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x544b84['setAuthor']({'name':''+_0x408304});if(!config['TicketOpenEmbed']['EmbedColor'])_0x544b84['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x544b84['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x544b84['setThumbnail'](_0x2b9228);_0x544b84['setDescription'](''+_0x2a3fdb);if(config['TicketOpenEmbed']['FooterMsg'])_0x544b84['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x544b84['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x544b84['setTimestamp']();_0x533afd['send']({'embeds':[_0x544b84],'components':[_0x305f13],'fetchReply':!![]})['then'](async _0x350da6=>{let _0x2e4861=new MessageEmbed()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('GREEN')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x533afd['id']+'>')['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x1951e5=new MessageActionRow()['addComponents'](new MessageButton()['setStyle']('LINK')['setURL'](''+_0x350da6['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));_0x2af4aa['editReply']({'embeds':[_0x2e4861],'components':[_0x1951e5],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x533afd['send']({'content':'<@!'+_0x2af4aa['user']['id']+'>'})['then'](_0x4fe4eb=>setTimeout(()=>_0x4fe4eb['delete']()['catch'](_0x8bcf44=>{}),0x1f4));if(config['TicketButton3']['MentionSupportRoles']){let _0x436c2e=config['TicketButton3']['SupportRoles']['map'](_0x37592f=>{let _0x5b06fa=_0x2af4aa['guild']['roles']['cache']['get'](_0x37592f);if(_0x5b06fa)return _0x5b06fa;});_0x533afd['send'](_0x436c2e['join']('\x20'))['then'](_0x5ea554=>setTimeout(()=>_0x5ea554['delete']()['catch'](_0x5bc431=>{}),0x1f4));}_0x8b5eb2['tickets']['ensure'](''+_0x533afd['id'],{'userID':_0x2af4aa['user']['id'],'ticketType':config['TicketButton3']['TicketName'],'button':'TicketButton3','msgID':_0x350da6['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open'});let _0x591469=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x2af4aa['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x2af4aa['user']['id']),_0x591469);_0x8b5eb2['emit']('ticketCreate',_0x2af4aa);});}if(_0x260639==='button4'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x9890f6=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,''+utils['duration'](config['TicketSettings']['TicketCooldown']*0x3e8-(Date['now']()-Cooldown['get'](_0x2af4aa['user']['id'])))),_0x2f17e3=new MessageEmbed()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('RED')['setDescription'](_0x9890f6)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x2af4aa['user']['id']))return _0x2af4aa['editReply']({'embeds':[_0x2f17e3],'ephemeral':!![]});let _0x116ac0='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20TicketButton4,\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x116ac0,_0x49e8c4=>{if(_0x49e8c4)console['log'](_0x49e8c4);});let _0x24f606=new MessageEmbed()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['blacklistedUsers']['has'](''+_0x2af4aa['user']['id'])&&_0x8b5eb2['blacklistedUsers']['get'](''+_0x2af4aa['user']['id'],'blacklisted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x24f606],'ephemeral':!![]});let _0x155e32=![],_0x39ded4=new MessageEmbed()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x59a717=0x0;_0x59a717<config['TicketSettings']['BlacklistedRoles']['length'];_0x59a717++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x59a717]))_0x155e32=!![];}if(_0x155e32===!![])return _0x2af4aa['editReply']({'embeds':[_0x39ded4],'ephemeral':!![]});if(config['TicketButton4']['Enabled']&&!_0x2af4aa['guild']['channels']['cache']['get'](config['TicketButton4']['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton4.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0x12f277=config['TicketSettings']['MaxTickets'],_0x5f272e=0x0,_0x3766f5=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0x12f277),_0x4fe3a0=new MessageEmbed()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('RED')['setDescription'](_0x3766f5)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x2af4aa['guild']['channels']['cache']['forEach'](_0x3611ea=>{if(_0x8b5eb2['tickets']['has'](_0x3611ea['id'])){let _0xd8b70f=_0x8b5eb2['tickets']['get'](''+_0x3611ea['id'],'userID');_0xd8b70f&&_0xd8b70f===_0x2af4aa['user']['id']&&_0x8b5eb2['tickets']['get'](_0x3611ea['id'],'status')!=='Closed'&&(_0x5f272e=_0x5f272e+0x1);}});if(_0x5f272e>=_0x12f277)return _0x2af4aa['editReply']({'embeds':[_0x4fe3a0],'ephemeral':!![]})['then'](_0x20f828=>{_0x5f272e=0x0;})['catch'](_0x1172a4=>{});let _0x49b2dc=config['TicketButton4']['ChannelName']['replace'](/{username}/g,''+_0x2af4aa['user']['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{user-id}/g,''+_0x2af4aa['user']['id']),_0x23d7f7=[{'id':_0x2af4aa['member']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']},{'id':_0x2af4aa['guild']['id'],'deny':['SEND_MESSAGES','VIEW_CHANNEL']},{'id':_0x8b5eb2['user']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL']}];await config['TicketButton4']['SupportRoles']['forEach'](_0x3e09bd=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x3e09bd);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton4.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0x429837={'id':role['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']};_0x23d7f7['push'](_0x429837);});const _0x1db403=await _0x2af4aa['guild']['channels']['create'](_0x49b2dc,{'type':'text','parent':config['TicketButton4']['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{category}/g,''+config['TicketButton4']['TicketName']),'permissionOverwrites':_0x23d7f7}),_0x1c95ac=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x2196b4=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x200ef1='';if(config['ClaimingSystem']['Enabled'])_0x200ef1=new MessageActionRow()['addComponents'](_0x1c95ac,_0x2196b4);if(config['ClaimingSystem']['Enabled']===![])_0x200ef1=new MessageActionRow()['addComponents'](_0x1c95ac);let _0x335f43=config['TicketButton4']['TicketMessage']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>'),_0x1bf8ba=config['TicketButton4']['TicketMessageTitle']['replace'](/{category}/g,''+config['TicketButton4']['TicketName']);var _0x2b9228=_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x271046=new MessageEmbed();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x271046['setAuthor']({'name':''+_0x1bf8ba,'iconURL':''+_0x2b9228});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x271046['setAuthor']({'name':''+_0x1bf8ba});if(!config['TicketOpenEmbed']['EmbedColor'])_0x271046['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x271046['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x271046['setThumbnail'](_0x2b9228);_0x271046['setDescription'](''+_0x335f43);if(config['TicketOpenEmbed']['FooterMsg'])_0x271046['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x271046['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x271046['setTimestamp']();_0x1db403['send']({'embeds':[_0x271046],'components':[_0x200ef1],'fetchReply':!![]})['then'](async _0x1869d8=>{let _0x102274=new MessageEmbed()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('GREEN')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x1db403['id']+'>')['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x18408d=new MessageActionRow()['addComponents'](new MessageButton()['setStyle']('LINK')['setURL'](''+_0x1869d8['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));_0x2af4aa['editReply']({'embeds':[_0x102274],'components':[_0x18408d],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x1db403['send']({'content':'<@!'+_0x2af4aa['user']['id']+'>'})['then'](_0x20412a=>setTimeout(()=>_0x20412a['delete']()['catch'](_0x254754=>{}),0x1f4));if(config['TicketButton4']['MentionSupportRoles']){let _0x54a5f1=config['TicketButton4']['SupportRoles']['map'](_0x5a8a6b=>{let _0x22c922=_0x2af4aa['guild']['roles']['cache']['get'](_0x5a8a6b);if(_0x22c922)return _0x22c922;});_0x1db403['send'](_0x54a5f1['join']('\x20'))['then'](_0x185c76=>setTimeout(()=>_0x185c76['delete']()['catch'](_0x2e6f6a=>{}),0x1f4));}_0x8b5eb2['tickets']['ensure'](''+_0x1db403['id'],{'userID':_0x2af4aa['user']['id'],'ticketType':config['TicketButton4']['TicketName'],'button':'TicketButton4','msgID':_0x1869d8['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open'});let _0x2d4b7f=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x2af4aa['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x2af4aa['user']['id']),_0x2d4b7f);_0x8b5eb2['emit']('ticketCreate',_0x2af4aa);});}if(_0x260639==='button5'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x37883f=config['Locale']['cooldownEmbedMsg']['replace'](/{time}/g,''+utils['duration'](config['TicketSettings']['TicketCooldown']*0x3e8-(Date['now']()-Cooldown['get'](_0x2af4aa['user']['id'])))),_0x2a7651=new MessageEmbed()['setTitle'](config['Locale']['cooldownEmbedMsgTitle'])['setColor']('RED')['setDescription'](_0x37883f)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(Cooldown['has'](_0x2af4aa['user']['id']))return _0x2af4aa['editReply']({'embeds':[_0x2a7651],'ephemeral':!![]});let _0x130e4e='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CREATION]\x20Button:\x20TicketButton5,\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x130e4e,_0x18ea41=>{if(_0x18ea41)console['log'](_0x18ea41);});let _0x4927b1=new MessageEmbed()['setTitle'](config['Locale']['userBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['userBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['blacklistedUsers']['has'](''+_0x2af4aa['user']['id'])&&_0x8b5eb2['blacklistedUsers']['get'](''+_0x2af4aa['user']['id'],'blacklisted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x4927b1],'ephemeral':!![]});let _0x5163f0=![],_0x212a12=new MessageEmbed()['setTitle'](config['Locale']['RoleBlacklistedTitle'])['setColor']('RED')['setDescription'](config['Locale']['RoleBlacklistedMsg'])['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();for(let _0x2afbd2=0x0;_0x2afbd2<config['TicketSettings']['BlacklistedRoles']['length'];_0x2afbd2++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketSettings']['BlacklistedRoles'][_0x2afbd2]))_0x5163f0=!![];}if(_0x5163f0===!![])return _0x2af4aa['editReply']({'embeds':[_0x212a12],'ephemeral':!![]});if(config['TicketButton5']['Enabled']&&!_0x2af4aa['guild']['channels']['cache']['get'](config['TicketButton5']['TicketCategoryID']))return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton5.TicketCategoryID\x20is\x20not\x20a\x20valid\x20category!');let _0x45df17=config['TicketSettings']['MaxTickets'],_0x427bfc=0x0,_0x30bcc4=config['Locale']['AlreadyOpenMsg']['replace'](/{max}/g,''+_0x45df17),_0xedf826=new MessageEmbed()['setTitle'](config['Locale']['AlreadyOpenTitle'])['setColor']('RED')['setDescription'](_0x30bcc4)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();await _0x2af4aa['guild']['channels']['cache']['forEach'](_0x39a212=>{if(_0x8b5eb2['tickets']['has'](_0x39a212['id'])){let _0x1f800f=_0x8b5eb2['tickets']['get'](''+_0x39a212['id'],'userID');_0x1f800f&&_0x1f800f===_0x2af4aa['user']['id']&&_0x8b5eb2['tickets']['get'](_0x39a212['id'],'status')!=='Closed'&&(_0x427bfc=_0x427bfc+0x1);}});if(_0x427bfc>=_0x45df17)return _0x2af4aa['editReply']({'embeds':[_0xedf826],'ephemeral':!![]})['then'](_0x5c53ba=>{_0x427bfc=0x0;})['catch'](_0x3573cc=>{});let _0x515d07=config['TicketButton5']['ChannelName']['replace'](/{username}/g,''+_0x2af4aa['user']['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{user-id}/g,''+_0x2af4aa['user']['id']),_0x84c3bb=[{'id':_0x2af4aa['member']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']},{'id':_0x2af4aa['guild']['id'],'deny':['SEND_MESSAGES','VIEW_CHANNEL']},{'id':_0x8b5eb2['user']['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL']}];await config['TicketButton5']['SupportRoles']['forEach'](_0x49e54f=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x49e54f);if(!role)return console['log']('\x1b[31m%s\x1b[0m','[WARNING]\x20TicketButton5.SupportRoles\x20is\x20not\x20a\x20valid\x20role!');let _0x311d77={'id':role['id'],'allow':['SEND_MESSAGES','VIEW_CHANNEL','ATTACH_FILES','EMBED_LINKS','READ_MESSAGE_HISTORY']};_0x84c3bb['push'](_0x311d77);});const _0x51fd89=await _0x2af4aa['guild']['channels']['create'](_0x515d07,{'type':'text','parent':config['TicketButton5']['TicketCategoryID'],'topic':config['TicketSettings']['ChannelTopic']['replace'](/{username}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag'])['replace'](/{category}/g,''+config['TicketButton5']['TicketName']),'permissionOverwrites':_0x84c3bb}),_0x21e284=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x45f784=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x9a7f6='';if(config['ClaimingSystem']['Enabled'])_0x9a7f6=new MessageActionRow()['addComponents'](_0x21e284,_0x45f784);if(config['ClaimingSystem']['Enabled']===![])_0x9a7f6=new MessageActionRow()['addComponents'](_0x21e284);let _0x1641b8=config['TicketButton5']['TicketMessage']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>'),_0x52c76a=config['TicketButton5']['TicketMessageTitle']['replace'](/{category}/g,''+config['TicketButton5']['TicketName']);var _0x2b9228=_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400});const _0x3352ab=new MessageEmbed();if(config['TicketOpenEmbed']['UserIconAuthor'])_0x3352ab['setAuthor']({'name':''+_0x52c76a,'iconURL':''+_0x2b9228});if(config['TicketOpenEmbed']['UserIconAuthor']===![])_0x3352ab['setAuthor']({'name':''+_0x52c76a});if(!config['TicketOpenEmbed']['EmbedColor'])_0x3352ab['setColor'](config['EmbedColors']);if(config['TicketOpenEmbed']['EmbedColor'])_0x3352ab['setColor'](config['TicketOpenEmbed']['EmbedColor']);if(config['TicketOpenEmbed']['UserIconThumbnail'])_0x3352ab['setThumbnail'](_0x2b9228);_0x3352ab['setDescription'](''+_0x1641b8);if(config['TicketOpenEmbed']['FooterMsg'])_0x3352ab['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg']});if(config['TicketOpenEmbed']['FooterMsg']&&config['TicketOpenEmbed']['FooterIcon'])_0x3352ab['setFooter']({'text':''+config['TicketOpenEmbed']['FooterMsg'],'iconURL':''+config['TicketOpenEmbed']['FooterIcon']});if(config['TicketOpenEmbed']['Timestamp'])_0x3352ab['setTimestamp']();_0x51fd89['send']({'embeds':[_0x3352ab],'components':[_0x9a7f6],'fetchReply':!![]})['then'](async _0x43ef1e=>{let _0x31631b=new MessageEmbed()['setTitle'](config['Locale']['ticketCreatedTitle'])['setColor']('GREEN')['setDescription'](config['Locale']['ticketCreatedMsg']+'\x20<#'+_0x51fd89['id']+'>')['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();const _0x5f25d8=new MessageActionRow()['addComponents'](new MessageButton()['setStyle']('LINK')['setURL'](''+_0x43ef1e['url'])['setLabel'](config['Locale']['logsTicket'])['setEmoji'](config['ButtonEmojis']['ticketCreated']));_0x2af4aa['editReply']({'embeds':[_0x31631b],'components':[_0x5f25d8],'ephemeral':!![]});if(config['TicketSettings']['MentionAuthor'])_0x51fd89['send']({'content':'<@!'+_0x2af4aa['user']['id']+'>'})['then'](_0x26e624=>setTimeout(()=>_0x26e624['delete']()['catch'](_0x42119f=>{}),0x1f4));if(config['TicketButton5']['MentionSupportRoles']){let _0x1a2dd2=config['TicketButton5']['SupportRoles']['map'](_0x377bc4=>{let _0x514af6=_0x2af4aa['guild']['roles']['cache']['get'](_0x377bc4);if(_0x514af6)return _0x514af6;});_0x51fd89['send'](_0x1a2dd2['join']('\x20'))['then'](_0x1f9397=>setTimeout(()=>_0x1f9397['delete']()['catch'](_0x183ad5=>{}),0x1f4));}_0x8b5eb2['tickets']['ensure'](''+_0x51fd89['id'],{'userID':_0x2af4aa['user']['id'],'ticketType':config['TicketButton5']['TicketName'],'button':'TicketButton5','msgID':_0x43ef1e['id'],'claimed':![],'claimUser':'','messages':0x0,'lastMessageSent':Date['now'](),'status':'Open'}),_0x8b5eb2['emit']('ticketCreate',_0x2af4aa);let _0x24e1cf=config['TicketSettings']['TicketCooldown']*0x3e8;if(config['TicketSettings']['TicketCooldown']>0x0)Cooldown['set'](_0x2af4aa['user']['id'],Date['now']());if(config['TicketSettings']['TicketCooldown']>0x0)setTimeout(()=>Cooldown['delete'](_0x2af4aa['user']['id']),_0x24e1cf);});}_0x2af4aa['customId']==='closeTicket'&&_0x8b5eb2['emit']('ticketClose',_0x2af4aa);if(_0x2af4aa['customId']==='ticketclaim'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x465357='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20CLAIM]\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x465357,_0x2a6f32=>{if(_0x2a6f32)console['log'](_0x2a6f32);});if(config['ClaimingSystem']['Enabled']===![])return _0x2af4aa['editReply']({'content':'Ticket\x20claiming\x20is\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});let _0x35597f=![],_0x456c5d=_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'button');if(_0x456c5d==='TicketButton1')for(let _0x54d356=0x0;_0x54d356<config['TicketButton1']['SupportRoles']['length'];_0x54d356++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton1']['SupportRoles'][_0x54d356]))_0x35597f=!![];}else{if(_0x456c5d==='TicketButton2')for(let _0x2fbd42=0x0;_0x2fbd42<config['TicketButton2']['SupportRoles']['length'];_0x2fbd42++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton2']['SupportRoles'][_0x2fbd42]))_0x35597f=!![];}else{if(_0x456c5d==='TicketButton3')for(let _0x289807=0x0;_0x289807<config['TicketButton3']['SupportRoles']['length'];_0x289807++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton3']['SupportRoles'][_0x289807]))_0x35597f=!![];}else{if(_0x456c5d==='TicketButton4')for(let _0x28c06f=0x0;_0x28c06f<config['TicketButton4']['SupportRoles']['length'];_0x28c06f++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton4']['SupportRoles'][_0x28c06f]))_0x35597f=!![];}else{if(_0x456c5d==='TicketButton5')for(let _0x3b77a9=0x0;_0x3b77a9<config['TicketButton5']['SupportRoles']['length'];_0x3b77a9++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton5']['SupportRoles'][_0x3b77a9]))_0x35597f=!![];}}}}}if(config['ClaimingSystem']['Enabled']&&_0x35597f===![])return _0x2af4aa['editReply']({'content':config['Locale']['restrictTicketClaim'],'ephemeral':!![]});let _0x38ab3a=config['Locale']['ticketClaimed']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>');const _0x5b21d9=new MessageEmbed()['setTitle'](config['Locale']['ticketClaimedTitle'])['setColor']('GREEN')['setDescription'](_0x38ab3a)['setTimestamp']()['setFooter']({'text':config['Locale']['ticketClaimedBy']+'\x20'+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'dynamic':!![]})});_0x2af4aa['editReply']({'content':config['Locale']['claimTicketMsg'],'ephemeral':![]}),_0x2af4aa['channel']['send']({'embeds':[_0x5b21d9],'ephemeral':![]}),_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'msgID'))['then'](async _0x2918fa=>{const _0x108ddd=_0x2918fa['embeds'][0x0];_0x108ddd['fields'][0x0]={'name':''+config['Locale']['ticketClaimedBy'],'value':'>\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')'};const _0x533fba=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle']('DANGER')['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x5d3e91=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle']('SECONDARY')['setDisabled'](!![]),_0x2db03f=new MessageButton()['setCustomId']('ticketunclaim')['setLabel'](config['Locale']['unclaimTicketButton'])['setStyle'](config['ButtonColors']['ticketUnclaim']);let _0x1773d5=new MessageActionRow()['addComponents'](_0x533fba,_0x5d3e91,_0x2db03f);_0x2918fa['edit']({'embeds':[_0x108ddd],'components':[_0x1773d5]}),_0x8b5eb2['emit']('ticketClaim',_0x2af4aa);if(_0x456c5d==='TicketButton1')await config['TicketButton1']['SupportRoles']['forEach'](_0xd326a0=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0xd326a0);if(role){if(config['ClaimingSystem']['ExcludeOtherUsers']===![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':!![]});if(config['ClaimingSystem']['ExcludeOtherUsers']===!![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':![]});}});else{if(_0x456c5d==='TicketButton2')await config['TicketButton2']['SupportRoles']['forEach'](_0x5cb0ab=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x5cb0ab);if(role){if(config['ClaimingSystem']['ExcludeOtherUsers']===![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':!![]});if(config['ClaimingSystem']['ExcludeOtherUsers']===!![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':![]});}});else{if(_0x456c5d==='TicketButton3')await config['TicketButton3']['SupportRoles']['forEach'](_0x27a16c=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x27a16c);if(role){if(config['ClaimingSystem']['ExcludeOtherUsers']===![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':!![]});if(config['ClaimingSystem']['ExcludeOtherUsers']===!![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':![]});}});else{if(_0x456c5d==='TicketButton4')await config['TicketButton4']['SupportRoles']['forEach'](_0x146d38=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x146d38);if(role){if(config['ClaimingSystem']['ExcludeOtherUsers']===![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':!![]});if(config['ClaimingSystem']['ExcludeOtherUsers']===!![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':![]});}});else _0x456c5d==='TicketButton5'&&await config['TicketButton5']['SupportRoles']['forEach'](_0x266a13=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x266a13);if(role){if(config['ClaimingSystem']['ExcludeOtherUsers']===![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':!![]});if(config['ClaimingSystem']['ExcludeOtherUsers']===!![])_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':![],'VIEW_CHANNEL':![]});}});}}}await _0x2af4aa['channel']['permissionOverwrites']['edit'](_0x2af4aa['user'],{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]}),_0x8b5eb2['tickets']['set'](_0x2af4aa['channel']['id'],!![],'claimed'),_0x8b5eb2['tickets']['set'](_0x2af4aa['channel']['id'],_0x2af4aa['user']['id'],'claimUser');let _0x521833;if(!config['claimTicket']['ChannelID'])_0x521833=_0x2af4aa['guild']['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['claimTicket']['ChannelID'])_0x521833=_0x2af4aa['guild']['channels']['cache']['get'](config['claimTicket']['ChannelID']);const _0x3a1dfe=new MessageEmbed()['setColor']('GREEN')['setTitle'](config['Locale']['ticketClaimedLog'])['addField']('\x20'+config['Locale']['logsExecutor'],'>\x20<@!'+_0x2af4aa['user']['id']+'>\x0a>\x20'+_0x2af4aa['user']['tag'])['addField']('\x20'+config['Locale']['logsTicket'],'>\x20<#'+_0x2af4aa['channel']['id']+'>\x0a>\x20#'+_0x2af4aa['channel']['name']+'\x0a>\x20'+_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'ticketType'))['setTimestamp']()['setThumbnail'](_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})});if(_0x521833&&config['claimTicket']['Enabled'])_0x521833['send']({'embeds':[_0x3a1dfe]});});}if(_0x2af4aa['customId']==='ticketunclaim'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x1b0c26='\x0a\x0a['+new Date()['toLocaleString']()+']\x20[TICKET\x20UNCLAIM]\x20User:\x20'+_0x2af4aa['user']['tag'];fs['appendFile']('./logs.txt',_0x1b0c26,_0xb01693=>{if(_0xb01693)console['log'](_0xb01693);});if(config['ClaimingSystem']['Enabled']===![])return _0x2af4aa['editReply']({'content':'Ticket\x20claiming\x20is\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});if(_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'claimed')===![])return _0x2af4aa['editReply']({'content':'This\x20ticket\x20has\x20not\x20been\x20claimed!','ephemeral':!![]});let _0x1cd80c=config['Locale']['ticketDidntClaim']['replace'](/{user}/g,'<@!'+_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'claimUser')+'>');if(_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'claimUser')!==_0x2af4aa['user']['id'])return _0x2af4aa['editReply']({'content':_0x1cd80c,'ephemeral':!![]});let _0x4cd5ed=_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'button');if(_0x4cd5ed==='TicketButton1')await config['TicketButton1']['SupportRoles']['forEach'](_0x2b98cc=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x2b98cc),role&&_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![]});});else{if(_0x4cd5ed==='TicketButton2')await config['TicketButton2']['SupportRoles']['forEach'](_0x23d884=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x23d884),role&&_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![]});});else{if(_0x4cd5ed==='TicketButton3')await config['TicketButton3']['SupportRoles']['forEach'](_0x50202a=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x50202a),role&&_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![]});});else{if(_0x4cd5ed==='TicketButton4')await config['TicketButton4']['SupportRoles']['forEach'](_0x175196=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x175196),role&&_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![]});});else _0x4cd5ed==='TicketButton5'&&await config['TicketButton5']['SupportRoles']['forEach'](_0x448948=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x448948),role&&_0x2af4aa['channel']['permissionOverwrites']['edit'](role,{'SEND_MESSAGES':!![],'VIEW_CHANNEL':!![]});});}}}let _0x41fb24=config['Locale']['ticketUnClaimed']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>');const _0x3358a9=new MessageEmbed()['setTitle'](config['Locale']['ticketUnClaimedTitle'])['setColor']('RED')['setDescription'](_0x41fb24)['setTimestamp']()['setFooter']({'text':config['Locale']['ticketUnClaimedBy']+'\x20'+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'dynamic':!![]})});_0x2af4aa['editReply']({'content':config['Locale']['unclaimTicketMsg'],'ephemeral':!![]}),_0x2af4aa['channel']['send']({'embeds':[_0x3358a9]}),_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'msgID'))['then'](async _0x2dce90=>{const _0x4a63b9=_0x2dce90['embeds'][0x0];_0x4a63b9['fields'][0x0]={'name':''+config['Locale']['ticketClaimedBy'],'value':'>\x20'+config['Locale']['ticketNotClaimed']};const _0xf8b124=new MessageButton()['setCustomId']('closeTicket')['setLabel'](config['Locale']['CloseTicketButton'])['setStyle'](config['ButtonColors']['closeTicket'])['setEmoji'](config['ButtonEmojis']['closeTicket']),_0x11c893=new MessageButton()['setCustomId']('ticketclaim')['setLabel'](config['Locale']['claimTicketButton'])['setEmoji'](config['ButtonEmojis']['ticketClaim'])['setStyle'](config['ButtonColors']['ticketClaim']);let _0x452ae3=new MessageActionRow()['addComponents'](_0xf8b124,_0x11c893);_0x2dce90['edit']({'embeds':[_0x4a63b9],'components':[_0x452ae3]}),_0x8b5eb2['tickets']['set'](_0x2af4aa['channel']['id'],![],'claimed'),_0x8b5eb2['tickets']['set'](_0x2af4aa['channel']['id'],'','claimUser');let _0x56af60;if(!config['unclaimTicket']['ChannelID'])_0x56af60=_0x2af4aa['guild']['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['unclaimTicket']['ChannelID'])_0x56af60=_0x2af4aa['guild']['channels']['cache']['get'](config['unclaimTicket']['ChannelID']);const _0x13d8c2=new MessageEmbed()['setColor']('RED')['setTitle'](config['Locale']['ticketUnClaimedLog'])['addField']('\x20'+config['Locale']['logsExecutor'],'>\x20<@!'+_0x2af4aa['user']['id']+'>\x0a>\x20'+_0x2af4aa['user']['tag'])['addField']('\x20'+config['Locale']['logsTicket'],'>\x20<#'+_0x2af4aa['channel']['id']+'>\x0a>\x20#'+_0x2af4aa['channel']['name']+'\x0a>\x20'+_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'ticketType'))['setTimestamp']()['setThumbnail'](_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})});if(_0x56af60&&config['unclaimTicket']['Enabled'])_0x56af60['send']({'embeds':[_0x13d8c2]});});}if(_0x2af4aa['customId']==='upvote'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x578397=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x169bd3=new MessageEmbed()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('RED')['setDescription'](_0x578397)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'status')==='Accepted'||_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'status')==='Denied')return _0x2af4aa['editReply']({'embeds':[_0x169bd3],'ephemeral':!![]});let _0x74b356=config['Locale']['suggestionAlreadyVoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x1205ff=new MessageEmbed()['setTitle'](config['Locale']['suggestionAlreadyVotedTitle'])['setColor']('RED')['setDescription'](_0x74b356)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['suggestionUsers']['has'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'])&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'userID')===_0x2af4aa['user']['id']&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'msgID')===_0x2af4aa['message']['id']&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x1205ff],'ephemeral':!![]});_0x8b5eb2['suggestions']['inc'](_0x2af4aa['message']['id'],'upVotes'),_0x8b5eb2['suggestionUsers']['ensure'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],{'userID':_0x2af4aa['user']['id'],'voted':!![],'voteType':'upvote','msgID':_0x2af4aa['message']['id']});if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voted')===![])_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],!![],'voted');if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voteType')==='downvote')_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'upvote','voteType');_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID'))['then'](_0x42233a=>{let _0x552edb=config['Locale']['suggestionUpvoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x25cefb=new MessageEmbed()['setTitle'](config['Locale']['suggestionUpvotedTitle'])['setColor']('GREEN')['setDescription'](_0x552edb)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x2af4aa['editReply']({'embeds':[_0x25cefb],'ephemeral':!![]});const _0x1901c9=_0x42233a['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x1901c9['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x1901c9['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')};let _0x49f27d=_0x2af4aa['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x5d3084=new MessageEmbed()['setColor']('GREEN')['setDescription'](config['SuggestionUpvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')\x20has\x20**upvoted**\x20[this](https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x49f27d)_0x49f27d['send']({'embeds':[_0x5d3084]});_0x42233a['edit']({'embeds':[_0x1901c9]}),_0x8b5eb2['globalStats']['inc'](_0x2af4aa['guild']['id'],'totalSuggestionUpvotes');});}if(_0x2af4aa['customId']==='downvote'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x393aa1=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0xa28f4e=new MessageEmbed()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('RED')['setDescription'](_0x393aa1)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'status')==='Accepted'||_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'status')==='Denied')return _0x2af4aa['editReply']({'embeds':[_0xa28f4e],'ephemeral':!![]});let _0x2d6bbc=config['Locale']['suggestionAlreadyVoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x280fbd=new MessageEmbed()['setTitle'](config['Locale']['suggestionAlreadyVotedTitle'])['setColor']('RED')['setDescription'](_0x2d6bbc)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['suggestionUsers']['has'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'])&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'userID')===_0x2af4aa['user']['id']&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'msgID')===_0x2af4aa['message']['id']&&_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voted')===!![])return _0x2af4aa['editReply']({'embeds':[_0x280fbd],'ephemeral':!![]});_0x8b5eb2['suggestions']['inc'](_0x2af4aa['message']['id'],'downVotes'),_0x8b5eb2['suggestionUsers']['ensure'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],{'userID':_0x2af4aa['user']['id'],'voted':!![],'voteType':'downvote','msgID':_0x2af4aa['message']['id']});if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voted')===![])_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],!![],'voted');if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voteType')==='upvote')_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'downvote','voteType');_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID'))['then'](_0x4939fb=>{let _0x59461a=config['Locale']['suggestionDownvoted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x56581b=new MessageEmbed()['setTitle'](config['Locale']['suggestionDownvotedTitle'])['setColor']('RED')['setDescription'](_0x59461a)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x2af4aa['editReply']({'embeds':[_0x56581b],'ephemeral':!![]});const _0x1cf97b=_0x4939fb['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x1cf97b['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x1cf97b['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')};let _0x23f151=_0x2af4aa['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x3d0a56=new MessageEmbed()['setColor']('RED')['setDescription'](config['SuggestionDownvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')\x20has\x20**downvoted**\x20[this](https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x23f151)_0x23f151['send']({'embeds':[_0x3d0a56]});_0x4939fb['edit']({'embeds':[_0x1cf97b]}),_0x8b5eb2['globalStats']['inc'](_0x2af4aa['guild']['id'],'totalSuggestionDownvotes');});}if(_0x2af4aa['customId']==='resetvote'){await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x34fb12=config['Locale']['suggestionNoVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x339506=new MessageEmbed()['setTitle'](config['Locale']['suggestionNoVoteTitle'])['setColor']('RED')['setDescription'](_0x34fb12)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(!_0x8b5eb2['suggestionUsers']['has'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'])||_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voted')===![])return _0x2af4aa['editReply']({'embeds':[_0x339506],'ephemeral':!![]});let _0x176d3f=config['Locale']['suggestionCantVote']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x278f3f=new MessageEmbed()['setTitle'](config['Locale']['suggestionCantVoteTitle'])['setColor']('RED')['setDescription'](_0x176d3f)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'status')==='Accepted'||_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'status')==='Denied')return _0x2af4aa['editReply']({'embeds':[_0x278f3f],'ephemeral':!![]});_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],![],'voted');if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voteType')==='upvote')_0x8b5eb2['suggestions']['dec'](_0x2af4aa['message']['id'],'upVotes');if(_0x8b5eb2['suggestionUsers']['get'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'voteType')==='downvote')_0x8b5eb2['suggestions']['dec'](_0x2af4aa['message']['id'],'downVotes');_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID'))['then'](_0x5f0eeb=>{let _0xeec116=config['Locale']['suggestionVoteReset']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0xbb24fc=new MessageEmbed()['setTitle'](config['Locale']['suggestionVoteResetTitle'])['setColor']('GREEN')['setDescription'](_0xeec116)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x2af4aa['editReply']({'embeds':[_0xbb24fc],'ephemeral':!![]});const _0x414e8a=_0x5f0eeb['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x414e8a['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Pending']};if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])_0x414e8a['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')};let _0x883723=_0x2af4aa['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x4f0e59=new MessageEmbed()['setColor']('ORANGE')['setDescription'](config['SuggestionResetvote']['ButtonEmoji']+'\x20|\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')\x20has\x20**reset\x20their\x20vote\x20for**\x20[this](https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x883723)_0x883723['send']({'embeds':[_0x4f0e59]});_0x5f0eeb['edit']({'embeds':[_0x414e8a]});});}if(_0x2af4aa['customId']==='accept'){if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])return;await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x2cd28e=![];await config['SuggestionSettings']['AllowedRoles']['forEach'](_0x3e482d=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x3e482d),role&&(_0x2af4aa['member']['roles']['cache']['has'](role['id'])&&(_0x2cd28e=!![]));});if(_0x2cd28e===![])return _0x2af4aa['editReply']({'content':config['Locale']['suggestionNoPerms'],'ephemeral':!![]});_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'Accepted','status'),_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID'))['then'](_0x568aea=>{let _0xe082df=config['Locale']['suggestionAccepted']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x5cdf0a=new MessageEmbed()['setTitle'](config['Locale']['suggestionAcceptedTitle'])['setColor']('GREEN')['setDescription'](_0xe082df)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x2af4aa['editReply']({'embeds':[_0x5cdf0a],'ephemeral':!![]});const _0x5d5702=_0x568aea['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x5d5702['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Accepted']};_0x5d5702['setColor'](config['SuggestionStatusesEmbedColors']['Accepted']);if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied']===![])_0x568aea['edit']({'embeds':[_0x5d5702]});if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied'])_0x568aea['edit']({'embeds':[_0x5d5702],'components':[]});let _0x2b734e=_0x2af4aa['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0xc176b=new MessageEmbed()['setColor']('GREEN')['setDescription'](config['SuggestionAccept']['ButtonEmoji']+'\x20|\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')\x20has\x20**accepted**\x20[this](https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x2b734e)_0x2b734e['send']({'embeds':[_0xc176b]});});}if(_0x2af4aa['customId']==='deny'){if(config['SuggestionSettings']['EnableAcceptDenySystem']===![])return;await _0x2af4aa['deferReply']({'ephemeral':!![]});let _0x2683cd=![];await config['SuggestionSettings']['AllowedRoles']['forEach'](_0x3a14d3=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x3a14d3),role&&(_0x2af4aa['member']['roles']['cache']['has'](role['id'])&&(_0x2683cd=!![]));});if(_0x2683cd===![])return _0x2af4aa['editReply']({'content':config['Locale']['suggestionNoPerms'],'ephemeral':!![]});_0x8b5eb2['suggestionUsers']['set'](_0x2af4aa['message']['id']+'_'+_0x2af4aa['user']['id'],'Denied','status'),_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID'))['then'](_0x6fd75f=>{let _0x4cf6e2=config['Locale']['suggestionDenied']['replace'](/{link}/g,'https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')),_0x5423aa=new MessageEmbed()['setTitle'](config['Locale']['suggestionDeniedTitle'])['setColor']('RED')['setDescription'](_0x4cf6e2)['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})})['setTimestamp']();_0x2af4aa['editReply']({'embeds':[_0x5423aa],'ephemeral':!![]});const _0x258b9c=_0x6fd75f['embeds'][0x0];if(config['SuggestionSettings']['EnableAcceptDenySystem'])_0x258b9c['fields'][0x1]={'name':'\x20'+config['Locale']['suggestionInformation'],'value':'>\x20**'+config['Locale']['suggestionFrom']+'**\x20<@!'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'userID')+'>\x0a>\x20**'+config['Locale']['suggestionUpvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'upVotes')+'\x0a>\x20**'+config['Locale']['suggestionDownvotes']+'**\x20'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'downVotes')+'\x0a>\x20**'+config['Locale']['suggestionStatus']+'**\x20'+config['SuggestionStatuses']['Denied']};_0x258b9c['setColor'](config['SuggestionStatusesEmbedColors']['Denied']);if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied']===![])_0x6fd75f['edit']({'embeds':[_0x258b9c]});if(config['SuggestionSettings']['RemoveAllButtonsIfAcceptedOrDenied'])_0x6fd75f['edit']({'embeds':[_0x258b9c],'components':[]});let _0x2ff2ea=_0x2af4aa['guild']['channels']['cache']['get'](config['SuggestionSettings']['LogsChannel']);const _0x36c970=new MessageEmbed()['setColor']('RED')['setDescription'](config['SuggestionDeny']['ButtonEmoji']+'\x20|\x20<@!'+_0x2af4aa['user']['id']+'>\x20('+_0x2af4aa['user']['tag']+')\x20has\x20**denied**\x20[this](https://discord.com/channels/'+_0x2af4aa['guild']['id']+'/'+_0x2af4aa['channel']['id']+'/'+_0x8b5eb2['suggestions']['get'](''+_0x2af4aa['message']['id'],'msgID')+')\x20suggestion!');if(config['SuggestionSettings']['LogsChannel']&&_0x2ff2ea)_0x2ff2ea['send']({'embeds':[_0x36c970]});});}if(_0x2af4aa['customId']==='ratingSelect'&&_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID')===_0x2af4aa['message']['id']&&_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'userID')===_0x2af4aa['user']['id']){const _0x3c11be=new Modal()['setCustomId']('modal-whyRating')['setTitle'](config['Locale']['ticketRating']),_0x265616=new TextInputComponent()['setCustomId']('textinput-whyRating')['setLabel'](config['Locale']['ticketRating'])['setStyle']('PARAGRAPH')['setMinLength'](0x14)['setMaxLength'](0xfa)['setPlaceholder'](config['Locale']['explainWhyRating'])['setRequired'](!![]),_0x24d6f8=new MessageActionRow()['addComponents'](_0x265616);_0x3c11be['addComponents'](_0x24d6f8);if(_0x2af4aa['values'][0x0]==='one_star'){const _0x5b0974=[{'rating':0x1,'guildID':config['GuildID'],'userID':_0x2af4aa['user']['id']}];_0x8b5eb2['reviews']['push'](config['GuildID'],_0x5b0974,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x2af4aa['showModal'](_0x3c11be);_0x8b5eb2['reviewsData']['set'](_0x2af4aa['message']['id'],0x1,'rating'),_0x8b5eb2['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x869256=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x413f68;if(!config['ticketClose']['ChannelID'])_0x413f68=_0x869256['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x413f68=_0x869256['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0xdff072='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0xdff072+='';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x413f68['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](_0x1005ca=>{const _0x2002f1=_0x1005ca['embeds'][0x0];_0x2002f1['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0xdff072+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``'},_0x1005ca['edit']({'embeds':[_0x2002f1]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0x37ed39=>{_0x37ed39['edit']({'components':[]}),_0x2af4aa['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x2af4aa['values'][0x0]==='two_star'){const _0x2e5028=[{'rating':0x2,'guildID':config['GuildID'],'userID':_0x2af4aa['user']['id']}];_0x8b5eb2['reviews']['push'](config['GuildID'],_0x2e5028,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x2af4aa['showModal'](_0x3c11be);_0x8b5eb2['reviewsData']['set'](_0x2af4aa['message']['id'],0x2,'rating'),_0x8b5eb2['globalStats']['inc'](config['GuildID'],'totalReviews');let _0xaf341c=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x54b045;if(!config['ticketClose']['ChannelID'])_0x54b045=_0xaf341c['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x54b045=_0xaf341c['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x52d5a8='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0x52d5a8+='';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x54b045['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](_0x54e172=>{const _0x2d4340=_0x54e172['embeds'][0x0];_0x2d4340['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x52d5a8+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``'},_0x54e172['edit']({'embeds':[_0x2d4340]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0x3197f9=>{_0x3197f9['edit']({'components':[]}),_0x2af4aa['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x2af4aa['values'][0x0]==='three_star'){const _0x1881e6=[{'rating':0x3,'guildID':config['GuildID'],'userID':_0x2af4aa['user']['id']}];_0x8b5eb2['reviews']['push'](config['GuildID'],_0x1881e6,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x2af4aa['showModal'](_0x3c11be);_0x8b5eb2['reviewsData']['set'](_0x2af4aa['message']['id'],0x3,'rating'),_0x8b5eb2['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x144a1c=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x393647;if(!config['ticketClose']['ChannelID'])_0x393647=_0x144a1c['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x393647=_0x144a1c['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x5ec4dd='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0x5ec4dd+='';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x393647['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](_0x30aa6a=>{const _0x2372bb=_0x30aa6a['embeds'][0x0];_0x2372bb['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x5ec4dd+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``'},_0x30aa6a['edit']({'embeds':[_0x2372bb]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0x69d335=>{_0x69d335['edit']({'components':[]}),_0x2af4aa['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x2af4aa['values'][0x0]==='four_star'){const _0x488d0e=[{'rating':0x4,'guildID':config['GuildID'],'userID':_0x2af4aa['user']['id']}];_0x8b5eb2['reviews']['push'](config['GuildID'],_0x488d0e,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x2af4aa['showModal'](_0x3c11be);_0x8b5eb2['reviewsData']['set'](_0x2af4aa['message']['id'],0x4,'rating'),_0x8b5eb2['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x3734f1=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x352b50;if(!config['ticketClose']['ChannelID'])_0x352b50=_0x3734f1['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x352b50=_0x3734f1['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x2aeb30='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0x2aeb30+='';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x352b50['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](_0x23eb48=>{const _0x4d9f67=_0x23eb48['embeds'][0x0];_0x4d9f67['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x2aeb30+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``'},_0x23eb48['edit']({'embeds':[_0x4d9f67]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0x414c63=>{_0x414c63['edit']({'components':[]}),_0x2af4aa['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}if(_0x2af4aa['values'][0x0]==='five_star'){const _0x115098=[{'rating':0x5,'guildID':config['GuildID'],'userID':_0x2af4aa['user']['id']}];_0x8b5eb2['reviews']['push'](config['GuildID'],_0x115098,'ratings');if(config['TicketReviewSettings']['AskWhyModal'])await _0x2af4aa['showModal'](_0x3c11be);_0x8b5eb2['reviewsData']['set'](_0x2af4aa['message']['id'],0x5,'rating'),_0x8b5eb2['globalStats']['inc'](config['GuildID'],'totalReviews');let _0x5cb05b=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x28e5ed;if(!config['ticketClose']['ChannelID'])_0x28e5ed=_0x5cb05b['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x28e5ed=_0x5cb05b['channels']['cache']['get'](config['ticketClose']['ChannelID']);let _0x3b9ed9='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0x3b9ed9+='';}if(config['TicketReviewSettings']['AskWhyModal']===![])_0x28e5ed['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](_0x3ef2bc=>{const _0x313092=_0x3ef2bc['embeds'][0x0];_0x313092['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x3b9ed9+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``'},_0x3ef2bc['edit']({'embeds':[_0x313092]});});if(config['TicketReviewSettings']['AskWhyModal']===![])_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0x3ccea4=>{_0x3ccea4['edit']({'components':[]}),_0x2af4aa['reply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});return;});}}if(_0x2af4aa['isModalSubmit']()&&config['TicketReviewSettings']['AskWhyModal']){await _0x2af4aa['deferReply']({'ephemeral':!![]});if(_0x2af4aa['customId']==='modal-whyRating'&&_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID')===_0x2af4aa['message']['id']&&_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'userID')===_0x2af4aa['user']['id']){const _0x3f11e3=_0x2af4aa['fields']['getTextInputValue']('textinput-whyRating');let _0x4bff19=_0x8b5eb2['guilds']['cache']['get'](config['GuildID']),_0x317fba;if(!config['ticketClose']['ChannelID'])_0x317fba=_0x4bff19['channels']['cache']['get'](config['TicketSettings']['LogsChannelID']);if(config['ticketClose']['ChannelID'])_0x317fba=_0x4bff19['channels']['cache']['get'](config['ticketClose']['ChannelID']);await _0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'reviewDMUserMsgID'))['then'](_0xb8c56c=>{_0xb8c56c['edit']({'components':[]});}),await _0x2af4aa['editReply']({'content':config['TicketReviewSettings']['ReviewMsg'],'ephemeral':!![]});let _0x571195='';for(var _0xf26e27=0x0;_0xf26e27<_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating');_0xf26e27++){_0x571195+='';}let _0x4e32ca=_0x8b5eb2['users']['cache']['get'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'ticketCreatorID')),_0x10c114=_0x4bff19['channels']['cache']['get'](config['TicketReviewSettings']['ReviewChannelID']);const _0x2c2ab5=new MessageEmbed()['setTitle'](config['Locale']['newTicketReview']+'\x20(#'+_0x8b5eb2['globalStats']['get'](''+_0x4bff19['id'],'totalReviews')+')')['setColor'](config['EmbedColors'])['setThumbnail'](_0x2af4aa['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['addField'](''+config['Locale']['ticketInformationCloseDM'],'>\x20'+config['Locale']['logsTicketAuthor']+':\x20<@!'+_0x4e32ca['id']+'>\x20('+_0x4e32ca['tag']+')\x0a>\x20'+config['Locale']['categoryCloseDM']+'\x20'+_0x8b5eb2['reviewsData']['get'](''+_0x2af4aa['message']['id'],'category')+'\x0a>\x20'+config['Locale']['totalMessagesLog']+'\x20'+_0x8b5eb2['reviewsData']['get'](''+_0x2af4aa['message']['id'],'totalMessages'))['addField'](''+config['Locale']['ticketReview'],'>\x20'+_0x571195+'\x0a>\x20'+_0x3f11e3)['setTimestamp']()['setFooter']({'text':''+_0x2af4aa['user']['tag'],'iconURL':''+_0x2af4aa['user']['displayAvatarURL']({'dynamic':!![]})});if(_0x10c114)_0x10c114['send']({'embeds':[_0x2c2ab5]});await _0x317fba['messages']['fetch'](_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'tCloseLogMsgID'))['then'](async _0x59f809=>{const _0x4901f5=_0x59f809['embeds'][0x0];_0x4901f5['fields'][0x3]={'name':'\x20'+config['Locale']['ticketRating'],'value':'>\x20'+_0x571195+'\x20``('+_0x8b5eb2['reviewsData']['get'](_0x2af4aa['message']['id'],'rating')+'/5)``\x0a>\x20'+_0x3f11e3},await _0x59f809['edit']({'embeds':[_0x4901f5]});});}}if(_0x2af4aa['customId']==='deleteTicket'){let _0x331721=![],_0x214304=_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'button');if(_0x214304==='TicketButton1')for(let _0x10fd95=0x0;_0x10fd95<config['TicketButton1']['SupportRoles']['length'];_0x10fd95++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton1']['SupportRoles'][_0x10fd95]))_0x331721=!![];}else{if(_0x214304==='TicketButton2')for(let _0x589e71=0x0;_0x589e71<config['TicketButton2']['SupportRoles']['length'];_0x589e71++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton2']['SupportRoles'][_0x589e71]))_0x331721=!![];}else{if(_0x214304==='TicketButton3')for(let _0x1ead6b=0x0;_0x1ead6b<config['TicketButton3']['SupportRoles']['length'];_0x1ead6b++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton3']['SupportRoles'][_0x1ead6b]))_0x331721=!![];}else{if(_0x214304==='TicketButton4')for(let _0x8d7ea3=0x0;_0x8d7ea3<config['TicketButton4']['SupportRoles']['length'];_0x8d7ea3++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton4']['SupportRoles'][_0x8d7ea3]))_0x331721=!![];}else{if(_0x214304==='TicketButton5')for(let _0x1ddffd=0x0;_0x1ddffd<config['TicketButton5']['SupportRoles']['length'];_0x1ddffd++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton5']['SupportRoles'][_0x1ddffd]))_0x331721=!![];}}}}}if(_0x331721===![])return _0x2af4aa['reply']({'content':config['Locale']['notAllowedDelete'],'ephemeral':!![]});_0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['tickets']['get'](_0x2af4aa['channel']['id'],'archiveMsgID'))['then'](_0x45f72b=>{_0x45f72b['delete']();}),_0x8b5eb2['emit']('ticketClose',_0x2af4aa);}if(_0x2af4aa['customId']==='reOpen'){await _0x2af4aa['deferReply']();let _0x578f8b=_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'button'),_0x28afe8=_0x8b5eb2['users']['cache']['get'](_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'userID')),_0x5aebfc=_0x2af4aa['guild']['channels']['cache']['get'](_0x2af4aa['channel']['id']),_0x2d03fd=config['Locale']['ticketReOpenedBy']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>')['replace'](/{user-tag}/g,''+_0x2af4aa['user']['tag']);const _0x5a210c=new MessageEmbed()['setColor']('GREEN')['setDescription'](_0x2d03fd);if(_0x578f8b==='TicketButton1'){if(config['TicketButton1']['ClosedCategoryID']&&_0x5aebfc['parentId']!==config['TicketButton1']['TicketCategoryID'])await _0x5aebfc['setParent'](config['TicketButton1']['TicketCategoryID'],{'lockPermissions':![]});if(config['ArchiveTickets']['ViewClosedTicket'])await config['TicketButton1']['SupportRoles']['forEach'](_0x22c77e=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x22c77e),role&&_0x2af4aa['channel']['permissionOverwrites']['create'](role['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});});let _0x396b1b=config['TicketButton1']['ChannelName']['replace'](/{username}/g,''+_0x28afe8['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x28afe8['tag'])['replace'](/{user-id}/g,''+_0x28afe8['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x2af4aa['channel']['setName'](''+_0x396b1b);}else{if(_0x578f8b==='TicketButton2'){if(config['TicketButton2']['ClosedCategoryID']&&_0x5aebfc['parentId']!==config['TicketButton2']['TicketCategoryID'])await _0x5aebfc['setParent'](config['TicketButton2']['TicketCategoryID'],{'lockPermissions':![]});if(config['ArchiveTickets']['ViewClosedTicket'])await config['TicketButton2']['SupportRoles']['forEach'](_0x8aec87=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x8aec87),role&&_0x2af4aa['channel']['permissionOverwrites']['create'](role['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});});let _0x369391=config['TicketButton2']['ChannelName']['replace'](/{username}/g,''+_0x28afe8['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x28afe8['tag'])['replace'](/{user-id}/g,''+_0x28afe8['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x2af4aa['channel']['setName'](''+_0x369391);}else{if(_0x578f8b==='TicketButton3'){if(config['TicketButton3']['ClosedCategoryID']&&_0x5aebfc['parentId']!==config['TicketButton3']['TicketCategoryID'])await _0x5aebfc['setParent'](config['TicketButton3']['TicketCategoryID'],{'lockPermissions':![]});if(config['ArchiveTickets']['ViewClosedTicket'])await config['TicketButton3']['SupportRoles']['forEach'](_0x19e06c=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0x19e06c),role&&_0x2af4aa['channel']['permissionOverwrites']['create'](role['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});});let _0x3bce6a=config['TicketButton3']['ChannelName']['replace'](/{username}/g,''+_0x28afe8['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x28afe8['tag'])['replace'](/{user-id}/g,''+_0x28afe8['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x2af4aa['channel']['setName'](''+_0x3bce6a);}else{if(_0x578f8b==='TicketButton4'){if(config['TicketButton4']['ClosedCategoryID']&&_0x5aebfc['parentId']!==config['TicketButton4']['TicketCategoryID'])await _0x5aebfc['setParent'](config['TicketButton4']['TicketCategoryID'],{'lockPermissions':![]});if(config['ArchiveTickets']['ViewClosedTicket'])await config['TicketButton4']['SupportRoles']['forEach'](_0xd524d3=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0xd524d3),role&&_0x2af4aa['channel']['permissionOverwrites']['create'](role['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});});let _0x2e8efb=config['TicketButton4']['ChannelName']['replace'](/{username}/g,''+_0x28afe8['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x28afe8['tag'])['replace'](/{user-id}/g,''+_0x28afe8['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x2af4aa['channel']['setName'](''+_0x2e8efb);}else{if(_0x578f8b==='TicketButton5'){if(config['TicketButton5']['ClosedCategoryID']&&_0x5aebfc['parentId']!==config['TicketButton5']['TicketCategoryID'])await _0x5aebfc['setParent'](config['TicketButton5']['TicketCategoryID'],{'lockPermissions':![]});if(config['ArchiveTickets']['ViewClosedTicket'])await config['TicketButton5']['SupportRoles']['forEach'](_0xd716b=>{role=_0x2af4aa['guild']['roles']['cache']['get'](_0xd716b),role&&_0x2af4aa['channel']['permissionOverwrites']['create'](role['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});});let _0x21d491=config['TicketButton5']['ChannelName']['replace'](/{username}/g,''+_0x28afe8['username'])['replace'](/{total-tickets}/g,''+_0x8b5eb2['globalStats']['get'](''+_0x2af4aa['guild']['id'],'totalTickets'))['replace'](/{user-tag}/g,''+_0x28afe8['tag'])['replace'](/{user-id}/g,''+_0x28afe8['id']);if(config['ArchiveTickets']['RenameClosedTicket'])_0x2af4aa['channel']['setName'](''+_0x21d491);}}}}}if(config['ArchiveTickets']['ViewClosedTicket'])await _0x2af4aa['channel']['permissionOverwrites']['create'](_0x28afe8['id'],{'VIEW_CHANNEL':!![],'SEND_MESSAGES':!![],'ATTACH_FILES':!![],'EMBED_LINKS':!![],'READ_MESSAGE_HISTORY':!![]});await _0x2af4aa['channel']['messages']['fetch'](_0x8b5eb2['tickets']['get'](_0x2af4aa['channel']['id'],'archiveMsgID'))['then'](_0x51f9fb=>{_0x51f9fb['delete']();}),await _0x8b5eb2['tickets']['set'](_0x2af4aa['channel']['id'],'Open','status'),await _0x2af4aa['followUp']({'embeds':[_0x5a210c]});}if(_0x2af4aa['customId']==='createTranscript'){let _0x2365b8=![],_0x1e9d91=_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'button');if(_0x1e9d91==='TicketButton1')for(let _0x235df0=0x0;_0x235df0<config['TicketButton1']['SupportRoles']['length'];_0x235df0++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton1']['SupportRoles'][_0x235df0]))_0x2365b8=!![];}else{if(_0x1e9d91==='TicketButton2')for(let _0x2cba59=0x0;_0x2cba59<config['TicketButton2']['SupportRoles']['length'];_0x2cba59++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton2']['SupportRoles'][_0x2cba59]))_0x2365b8=!![];}else{if(_0x1e9d91==='TicketButton3')for(let _0x3c9ef3=0x0;_0x3c9ef3<config['TicketButton3']['SupportRoles']['length'];_0x3c9ef3++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton3']['SupportRoles'][_0x3c9ef3]))_0x2365b8=!![];}else{if(_0x1e9d91==='TicketButton4')for(let _0x271440=0x0;_0x271440<config['TicketButton4']['SupportRoles']['length'];_0x271440++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton4']['SupportRoles'][_0x271440]))_0x2365b8=!![];}else{if(_0x1e9d91==='TicketButton5')for(let _0x4790a8=0x0;_0x4790a8<config['TicketButton5']['SupportRoles']['length'];_0x4790a8++){if(_0x2af4aa['member']['roles']['cache']['has'](config['TicketButton5']['SupportRoles'][_0x4790a8]))_0x2365b8=!![];}}}}}if(_0x2365b8===![])return _0x2af4aa['reply']({'content':config['Locale']['notAllowedTranscript'],'ephemeral':!![]});let _0x348525=_0x8b5eb2['users']['cache']['get'](_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'userID')),_0x2ab074=await utils['saveTranscript'](_0x2af4aa),_0x1c082b=config['Locale']['transcriptSavedBy']['replace'](/{user}/g,'<@!'+_0x2af4aa['user']['id']+'>');const _0x461795=new MessageEmbed()['setColor'](config['EmbedColors'])['setTitle'](config['Locale']['ticketTranscript'])['setDescription'](_0x1c082b)['addField'](''+config['Locale']['logsTicketAuthor'],'<@!'+_0x348525['id']+'>\x0a'+_0x348525['tag'],!![])['addField'](''+config['Locale']['ticketName'],'<#'+_0x2af4aa['channel']['id']+'>\x0a'+_0x2af4aa['channel']['name'],!![])['addField'](''+config['Locale']['ticketTranscriptCategory'],''+_0x8b5eb2['tickets']['get'](''+_0x2af4aa['channel']['id'],'ticketType'),!![])['setFooter']({'text':''+_0x348525['tag'],'iconURL':''+_0x348525['displayAvatarURL']({'dynamic':!![]})})['setTimestamp']();let _0x21e60c=_0x2af4aa['guild']['channels']['cache']['get'](config['ArchiveTickets']['TranscriptChannelID']);if(!_0x21e60c)return _0x2af4aa['reply']({'content':'Transcript\x20channel\x20has\x20not\x20been\x20setup\x20in\x20the\x20config!','ephemeral':!![]});if(_0x21e60c)_0x21e60c['send']({'embeds':[_0x461795],'files':[_0x2ab074]});let _0x4f4b26=config['Locale']['transcriptSaved']['replace'](/{channel}/g,'<#'+_0x21e60c['id']+'>');_0x2af4aa['reply']({'content':_0x4f4b26,'ephemeral':!![]});}};